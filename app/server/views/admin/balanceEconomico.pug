extends partials/layout

block head
    title Balance econ&oacute;mico

block content
    div(ng-app="dashboard")
        div
            include partials/navbar
        div.container-fluid
            div.row
                include partials/sidebar


                div.col-sm-9.col-sm-offset-3.col-md-10.col-md-offset-2.col-xs-12.main(ng-controller="BalanceEconomicoController")
                    h1.page-header(style="padding-top: 0px") Balance económico

                    div.col-md-12.col-sm-12.col-xs-12(style="margin-bottom: 15px")
                        div.col-md-3.col-xs-12.mlp-columna-criterio-filtro
                            h3(style="margin-top: 0px", ng-show="filteredBalances != null", ng-cloak, ng-bind-template="Sorteos")
                            div(ng-repeat="sorteo in sorteosGroup | orderBy:'toString()'", ng-show="balances != null", ng-cloak)
                                input(type="checkbox", ng-model="useSorteos[sorteo]", value="{{sorteo}}", ng-change="seleccionarSiEsElUnico(this, useSorteos, sorteo)")
                                span(style="padding-left: 10px", ng-bind-template="{{sorteo}}")
                                //pre {{sorteosGroup}}
                    div.col-md-12.col-sm-12.table-responsive(ng-show="filteredBalances.length > 0", ng-cloak)
                        table.table
                            thead
                                tr
                                    th Sorteo
                                    th Temporada / Año
                                    th Dinero invertido
                                    th Premios
                                    th Balance
                            tbody

                                tr(ng-repeat="balance in filteredBalances | orderBy:['sorteo', 'temporada', 'anyo']").balanceEconomico
                                    td(ng-bind-template="{{balance.sorteo}}")
                                    td(ng-bind-template="{{balance.temporada || balance.anyo}}")
                                    td
                                        span.badge.badge-rojo(ng-bind-template="{{redondear(balance.invertido)}}  €")
                                    td
                                        span.badge.badge-verde(ng-bind-template="{{redondear(balance.ganado)}}  €")
                                    td
                                        span.badge.badge-rojo(ng-show="balance.invertido > balance.ganado", ng-bind-template="{{redondear(restar(balance.ganado, balance.invertido))}}  €", ng-cloak)
                                        span.badge.badge-verde(ng-show="balance.invertido < balance.ganado", ng-bind-template="{{redondear(restar(balance.ganado, balance.invertido))}}  €", ng-cloak)
                                        span.badge.badge-naranja(ng-show="balance.invertido == balance.ganado", ng-bind-template="{{redondear(restar(balance.ganado, balance.invertido))}}  €", ng-cloak)

                                tr.balanceEconomico(ng-show="balances != null", ng-cloak)
                                    td Todos
                                    td(ng-bind-template="Total", ng-cloak)
                                    td
                                        span.badge.badge-rojo(ng-bind-template="{{redondear(totalDineroInvertido())}}  €")
                                    td
                                        span.badge.badge-verde(ng-bind-template="{{redondear(totalDineroGanado())}}  €")
                                    td
                                        span.badge.badge-rojo(ng-show="totalDineroInvertido() > totalDineroGanado()", ng-bind-template="{{redondear(balanceTotal())}}  €", ng-cloak)
                                        span.badge.badge-verde(ng-show="totalDineroInvertido() < totalDineroGanado()", ng-bind-template="{{redondear(balanceTotal())}}  €", ng-cloak)
                                        span.badge.badge-naranja(ng-show="totalDineroInvertido() == totalDineroGanado()", ng-bind-template="{{redondear(balanceTotal())}}  €", ng-cloak)


block scripts
    script(src="/js/jquery.js")
    script(src="/js/bootstrap.js")
    script(src="/js/angular.js")
    script(src='/js/angular/admin/dashboard.js')
    script(src="/js/angular/admin/balanceEconomico.js")
    script(src="/js/angular/admin/navbar.js")
    script(src="/js/angular/admin/sidebar.js")
    script(src='/js/angular/ui-bootstrap-tpls-1.3.3.js')
